---
import BaseLayout from "./BaseLayout.astro";
import Container from "./Container.astro";
import { getCollection } from "astro:content";

const { frontmatter } = Astro.props;

const vsechnyPrispevky = await getCollection("blog");

const ostatniPrispevky = vsechnyPrispevky.filter(
	(prispevek) => prispevek.id !== frontmatter.slug,
);
---

<style>
	.blogContainer {
		background-color: var(--bila);
		padding: 2rem;
		border-radius: 32px;
	}
	ul {
		list-style-type: none;
		margin: 0;
		padding: 0;
	}
</style>
<BaseLayout title={frontmatter.title} classValue="pageContainer">
	<Container>
		<img src={frontmatter.image.url} width="300" alt={frontmatter.image.alt} />
		<h1>{frontmatter.title}</h1>
		<p>Napsal {frontmatter.author}</p>
		<div class="blogContainer">
			<slot />
		</div>
		<p>Ostatní příspěvky</p>
			<ul>
				{
					ostatniPrispevky.map((prispevek) => (
						<li>
							<a href={`/blog/${prispevek.id}`}>
								<img
									src={prispevek.data.image.url}
									width="300"
									alt={prispevek.data.image.alt}
								/>
								{prispevek.data.title}
							</a>
						</li>
					))
				}
			</ul>
	</Container>
</BaseLayout>
